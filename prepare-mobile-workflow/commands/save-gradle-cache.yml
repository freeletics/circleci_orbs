description: "Saves Gradle caches and wrapper folders into CI cache."

parameters:
  cache_version:
    description: "Cache key (example \"v2\"). Could be used to invalidate cache."
    type: string
  cache_modifier:
    description: "Optional cache modifier. Useful to create several caches for the same dependencies file."
    type: string
    default: ""
  dependencies_file:
    description: "Path to the file that defines all project dependencies and their versions."
    type: string
  gradle_caches_dir:
    description: "Path to project Gradle instance 'caches' folder."
    type: string
    default: ~/.gradle/caches/
  gradle_wrapper_dir:
    description: "Path to project Gradle instance 'wrapper' folder."
    type: string
    default: ~/.gradle/wrapper/

steps:
  - save_cache:
      name: "Saving Gradle cache"
      key: << parameters.cache_version >>-<< parameters.cache_modifier >>-dependencies-{{ checksum << parameters.dependencies_file >> }}
      paths:
        - << parameters.gradle_caches_dir >>
        - << parameters.gradle_wrapper_dir >>
